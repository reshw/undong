# Smart Active Squad Implementation

**ì‘ì—… ì™„ë£Œì¼**: 2026-01-21
**ì‘ì—…ì**: Claude Code
**ë²„ì „**: 1.0

---

## ğŸ“‹ ì‘ì—… ê°œìš”

í´ëŸ½ ëŒ€ì‹œë³´ë“œì˜ "Daily Squad" ìœ„ì ¯ì„ "Smart Active Squad"ë¡œ ì—…ê·¸ë ˆì´ë“œí•˜ì—¬ ì˜¤ëŠ˜+ì–´ì œ ìš´ë™í•œ ë©¤ë²„ë¥¼ í•¨ê»˜ í‘œì‹œí•˜ë„ë¡ ê°œì„ í–ˆìŠµë‹ˆë‹¤.

### ë¬¸ì œì 
- ê¸°ì¡´: ì˜¤ëŠ˜ë§Œ í‘œì‹œ â†’ ì˜¤ì „ ì‹œê°„ëŒ€ë‚˜ í™œë™ ì ì€ ë‚  Empty State ë°œìƒ
- ì‚¬ìš©ìì˜ ìš´ë™ ì˜ìš• ì €í•˜ ê°€ëŠ¥ì„±

### í•´ê²°ì±…
- Smart Mix ì•Œê³ ë¦¬ì¦˜: ì˜¤ëŠ˜ + ì–´ì œ + ìµœê·¼ í™œë™ ë©¤ë²„ í‘œì‹œ
- ì‹œê°ì  êµ¬ë¶„: ë±ƒì§€ì™€ ìŠ¤íƒ€ì¼ë¡œ í™œë™ ì‹œì  êµ¬ë¶„

---

## ğŸ”§ êµ¬í˜„ ë‚´ìš©

### 1. íƒ€ì… ì •ì˜ ë³€ê²½

**íŒŒì¼**: `src/utils/dashboardLogic.ts`

#### SquadMember ì¸í„°í˜ì´ìŠ¤ í™•ì¥
```typescript
export interface SquadMember {
  userId: string;
  displayName: string;
  profileImage: string | null;
  mainActivity: string;
  memo: string | null;
  workoutCount: number;
  activityType: 'today' | 'yesterday' | 'recent'; // âœ¨ ì¶”ê°€
  lastActiveDate: string;                          // âœ¨ ì¶”ê°€ (YYYY-MM-DD)
}
```

---

### 2. ë¡œì§ êµ¬í˜„: getSmartSquad()

**íŒŒì¼**: `src/utils/dashboardLogic.ts:456`

#### ì•Œê³ ë¦¬ì¦˜ í”Œë¡œìš°

```
ì…ë ¥: WorkoutLog[]
  â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. ë‚ ì§œë³„ ë¶„ë¥˜                      â”‚
â”‚   - ì˜¤ëŠ˜(Today)                     â”‚
â”‚   - ì–´ì œ(Yesterday)                 â”‚
â”‚   - ìµœê·¼(Recent)                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 2. ìœ ì €ë³„ ìµœì‹  í™œë™ ì§‘ê³„            â”‚
â”‚   - ì¤‘ë³µ ì œê±° (ìµœì‹  ê¸°ë¡ë§Œ)         â”‚
â”‚   - activityType ê²°ì •               â”‚
â”‚   - workoutCount í•©ì‚°               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 3. Smart Mix ì •ë ¬                   â”‚
â”‚   A. ì˜¤ëŠ˜ ë©¤ë²„ ì¶”ê°€ (workoutCountâ†“) â”‚
â”‚   B. ì˜¤ëŠ˜ < 4ëª…? â†’ ì–´ì œ ë©¤ë²„ ì¶”ê°€   â”‚
â”‚   C. ì˜¤ëŠ˜+ì–´ì œ = 0? â†’ ìµœê·¼ 3ëª…      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  â†“
ì¶œë ¥: SquadMember[]
```

#### í•µì‹¬ ë¡œì§

```typescript
// Smart Mix ë¡œì§
const result: SquadMember[] = [];

// 1. ì˜¤ëŠ˜ ìš´ë™í•œ ë©¤ë²„ ì¶”ê°€
result.push(...todayMembers);

// 2. ì˜¤ëŠ˜ ë©¤ë²„ê°€ 4ëª… ë¯¸ë§Œì´ë©´ ì–´ì œ ë©¤ë²„ ì¶”ê°€
if (result.length < 4) {
  result.push(...yesterdayMembers);
}

// 3. ì˜¤ëŠ˜+ì–´ì œ ëª¨ë‘ ì—†ìœ¼ë©´ ìµœê·¼ ë©¤ë²„ ì¶”ê°€
if (result.length === 0) {
  result.push(...recentMembers);
}
```

---

### 3. UI êµ¬í˜„: DailySquad ì»´í¬ë„ŒíŠ¸

**íŒŒì¼**: `src/pages/ClubDetail.tsx:800`

#### ìŠ¤íƒ€ì¼ ì°¨ë³„í™”

| ìš”ì†Œ | Today | Yesterday | Recent |
|------|-------|-----------|--------|
| **ë±ƒì§€** | ğŸ”¥ Today | âš¡ Yesterday | ì—†ìŒ |
| **ë±ƒì§€ ìƒ‰ìƒ** | #8b5cf6 (ë³´ë¼) | #64748b (íšŒìƒ‰) | - |
| **í…Œë‘ë¦¬** | 2px solid #8b5cf6 | 2px dashed #64748b | 2px solid #475569 |
| **ë°°ê²½** | rgba(139,92,246,0.15) | rgba(255,255,255,0.05) | rgba(71,85,105,0.3) |
| **ë¶ˆíˆ¬ëª…ë„** | 100% | 85% | 70% |
| **í”„ë¡œí•„ í…Œë‘ë¦¬** | 3px solid #8b5cf6 | 2px solid #64748b | 2px solid #64748b |
| **ë©”ëª¨ ìƒ‰ìƒ** | #8b5cf6 | #64748b | #64748b |

#### ë™ì  ì„œë¸Œíƒ€ì´í‹€

```typescript
// ì˜ˆì‹œ
"ì˜¤ëŠ˜ 3ëª…, ì–´ì œ 2ëª…ì´ ìš´ë™í–ˆìŠµë‹ˆë‹¤"  // ì˜¤ëŠ˜+ì–´ì œ í˜¼í•©
"5ëª…ì´ ì˜¤ëŠ˜ ìš´ë™í–ˆìŠµë‹ˆë‹¤"            // ì˜¤ëŠ˜ë§Œ
"3ëª…ì´ ì–´ì œ ìš´ë™í–ˆìŠµë‹ˆë‹¤"            // ì–´ì œë§Œ
"3ëª…ì˜ í™œì„± ë©¤ë²„"                    // ìµœê·¼ í™œë™
```

---

## ğŸ“Š ì‚¬ìš©ì ê²½í—˜ ê°œì„ 

### Before (ê¸°ì¡´)

```
ì˜¤ì „ 8ì‹œ ì ‘ì†
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ‘¥ ì˜¤ëŠ˜ì˜ ìŠ¤ì¿¼ë“œ        â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   â”‚
â”‚ ì˜¤ëŠ˜ ìš´ë™í•œ ë©¤ë²„ê°€      â”‚
â”‚ ì—†ìŠµë‹ˆë‹¤. ğŸ˜¢           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### After (ê°œì„ )

```
ì˜¤ì „ 8ì‹œ ì ‘ì†
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ‘¥ Active Squad                     â”‚
â”‚ ì–´ì œ 5ëª…ì´ ìš´ë™í–ˆìŠµë‹ˆë‹¤             â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚ [âš¡Yesterday] [âš¡Yesterday] ...      â”‚
â”‚  Alice          Bob                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ì˜¤í›„ 2ì‹œ - Charlie ìš´ë™ ì™„ë£Œ
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ‘¥ Active Squad                     â”‚
â”‚ ì˜¤ëŠ˜ 1ëª…, ì–´ì œ 5ëª…ì´ ìš´ë™í–ˆìŠµë‹ˆë‹¤   â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚ [ğŸ”¥Today]   [âš¡Yesterday] ...        â”‚
â”‚  Charlie     Alice                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¯ ê¸°ëŒ€ íš¨ê³¼

### 1. Empty State ìµœì†Œí™”
- ì˜¤ì „ ì‹œê°„ëŒ€ì—ë„ ì–´ì œ ë©¤ë²„ í‘œì‹œë¡œ í™œê¸°ì°¬ ëŒ€ì‹œë³´ë“œ
- í™œë™ì´ ì ì€ ë‚ ì—ë„ ìµœê·¼ ë©¤ë²„ í‘œì‹œë¡œ ê³µí—ˆí•¨ ë°©ì§€

### 2. ì‹¤ì‹œê°„ ë™ê¸°ë¶€ì—¬
- ì˜¤ëŠ˜ ìš´ë™í•˜ë©´ ì¦‰ì‹œ "ğŸ”¥ Today" ë±ƒì§€ë¡œ ìµœìƒë‹¨ ë°°ì¹˜
- ë™ë£Œë“¤ì˜ ìµœê·¼ í™œë™ í™•ì¸ìœ¼ë¡œ ìš´ë™ ì˜ìš• ìƒìŠ¹

### 3. ëª…í™•í•œ ì‹œê°ì  êµ¬ë¶„
- ë±ƒì§€ì™€ ìƒ‰ìƒìœ¼ë¡œ í™œë™ ì‹œì  ì§ê´€ì  íŒŒì•…
- ë¶ˆíˆ¬ëª…ë„ë¡œ ìš°ì„ ìˆœìœ„ ìì—°ìŠ¤ëŸ½ê²Œ ì „ë‹¬

### 4. ìœ ì—°í•œ í™•ì¥ì„±
- activityType í•„ë“œë¡œ í–¥í›„ ë‹¤ì–‘í•œ ê¸°ê°„ ì¶”ê°€ ê°€ëŠ¥
  - 'this_week', 'last_week', 'this_month' ë“±

---

## ğŸ§ª í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤

### ì‹œë‚˜ë¦¬ì˜¤ 1: ì˜¤ì „ ì‹œê°„ëŒ€
- **Given**: ì˜¤ì „ 8ì‹œ, ì˜¤ëŠ˜ ìš´ë™í•œ ì‚¬ëŒ 0ëª…, ì–´ì œ 5ëª…
- **When**: ëŒ€ì‹œë³´ë“œ ì ‘ì†
- **Then**: ì–´ì œ 5ëª…ì´ âš¡ Yesterday ë±ƒì§€ì™€ í•¨ê»˜ í‘œì‹œë¨

### ì‹œë‚˜ë¦¬ì˜¤ 2: ì²« ìš´ë™ ê¸°ë¡
- **Given**: ì˜¤ì „ 10ì‹œ, Charlieê°€ ì²« ìš´ë™ ê¸°ë¡
- **When**: ëŒ€ì‹œë³´ë“œ ìƒˆë¡œê³ ì¹¨
- **Then**: Charlieê°€ ğŸ”¥ Today ë±ƒì§€ë¡œ ìµœìƒë‹¨ì— í‘œì‹œë¨

### ì‹œë‚˜ë¦¬ì˜¤ 3: ì˜¤ëŠ˜ ë©¤ë²„ 4ëª… ì´ìƒ
- **Given**: ì˜¤ëŠ˜ ìš´ë™í•œ ì‚¬ëŒ 6ëª…, ì–´ì œ 3ëª…
- **When**: ëŒ€ì‹œë³´ë“œ ì ‘ì†
- **Then**: ì˜¤ëŠ˜ 6ëª…ë§Œ í‘œì‹œ (ì–´ì œ ë©¤ë²„ ìˆ¨ê¹€)

### ì‹œë‚˜ë¦¬ì˜¤ 4: ìµœê·¼ í™œë™ ì—†ìŒ
- **Given**: ì˜¤ëŠ˜+ì–´ì œ í™œë™ 0ëª…, ì¼ì£¼ì¼ ì „ í™œë™ 5ëª…
- **When**: ëŒ€ì‹œë³´ë“œ ì ‘ì†
- **Then**: ê°€ì¥ ìµœê·¼ í™œë™í•œ 3ëª… í‘œì‹œ

---

## ğŸ“ ë³€ê²½ëœ íŒŒì¼

### 1. src/utils/dashboardLogic.ts
- `SquadMember` ì¸í„°í˜ì´ìŠ¤ í™•ì¥
- `getSmartSquad()` í•¨ìˆ˜ ì¶”ê°€ (456ì¤„)
- `getTodaySquad()` í•¨ìˆ˜ deprecated í‘œì‹œ

### 2. src/pages/ClubDetail.tsx
- import ë³€ê²½: `getTodaySquad` â†’ `getSmartSquad`
- `DailySquad` ì»´í¬ë„ŒíŠ¸ ë¦¬íŒ©í† ë§ (800ì¤„)
  - ìŠ¤íƒ€ì¼ ì°¨ë³„í™”
  - ë±ƒì§€ ì‹œìŠ¤í…œ
  - ë™ì  ì„œë¸Œíƒ€ì´í‹€

### 3. docs/features/club_dashboard_widgets.md
- Daily Squad ì„¹ì…˜ ì—…ë°ì´íŠ¸
- Smart Active Squad ì•Œê³ ë¦¬ì¦˜ ì„¤ëª… ì¶”ê°€

---

## ğŸ”® í–¥í›„ í™•ì¥ ê°€ëŠ¥ì„±

### 1. ì¶”ê°€ ê¸°ê°„ ì˜µì…˜
```typescript
activityType: 'today' | 'yesterday' | 'this_week' | 'last_week' | 'this_month'
```

### 2. ìŠ¤íŠ¸ë¦­(Streak) í‘œì‹œ
```typescript
interface SquadMember {
  // ...
  streakDays?: number; // ì—°ì† ìš´ë™ ì¼ìˆ˜
  streakIcon?: string; // ğŸ”¥ğŸ”¥ğŸ”¥ (3ì¼ ì—°ì†)
}
```

### 3. í™œë™ ê°•ë„ í‘œì‹œ
```typescript
interface SquadMember {
  // ...
  intensityLevel?: 'light' | 'moderate' | 'intense';
  totalVolume?: number;    // ì´ ë³¼ë¥¨
  totalDistance?: number;  // ì´ ê±°ë¦¬
}
```

### 4. ì†Œì…œ ê¸°ëŠ¥
- ë©¤ë²„ ì¹´ë“œ í´ë¦­ â†’ ìƒì„¸ í”„ë¡œí•„
- ì‘ì› ë©”ì‹œì§€ ì „ì†¡
- í•¨ê»˜ ìš´ë™ ì´ˆëŒ€

---

## âœ… ì²´í¬ë¦¬ìŠ¤íŠ¸

- [x] SquadMember íƒ€ì… í™•ì¥
- [x] getSmartSquad() í•¨ìˆ˜ êµ¬í˜„
- [x] ì˜¤ëŠ˜+ì–´ì œ+ìµœê·¼ í•„í„°ë§ ë¡œì§
- [x] ì¤‘ë³µ ì œê±° ë° ìµœì‹  ê¸°ë¡ ìš°ì„ 
- [x] DailySquad ì»´í¬ë„ŒíŠ¸ ë¦¬íŒ©í† ë§
- [x] Today/Yesterday ë±ƒì§€ êµ¬í˜„
- [x] ìŠ¤íƒ€ì¼ ì°¨ë³„í™” (ìƒ‰ìƒ, í…Œë‘ë¦¬, ë¶ˆíˆ¬ëª…ë„)
- [x] ë™ì  ì„œë¸Œíƒ€ì´í‹€
- [x] ë¹Œë“œ í…ŒìŠ¤íŠ¸ í†µê³¼
- [x] ë¬¸ì„œ ì—…ë°ì´íŠ¸

---

## ğŸ“š ê´€ë ¨ ë¬¸ì„œ

- [í´ëŸ½ ëŒ€ì‹œë³´ë“œ ìœ„ì ¯ ì‹œìŠ¤í…œ](./club_dashboard_widgets.md)
- [í´ëŸ½ ë°ì´í„° êµ¬ì¡°](./club_dashboard_data_structure.md)

---

**Status**: âœ… ì™„ë£Œ
**Build**: âœ… í†µê³¼ (717.75 kB)
**Type Check**: âœ… í†µê³¼
